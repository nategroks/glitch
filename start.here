glitch quickstart
=================

Repo layout
- config/: palette presets for `~/.config/glitch/color.config`.
- src/: C sources plus generated `colors.h` and `shape.h`.
- scripts/: install, PATH helper, TLDR setup, and tooling.
- variants/, noise/, encryption/: stash example assets or work-in-progress files here.

1) Install/build once
- Prereqs: `cc`, `make`, `libpng`, `zlib`, `curl` (skip curl for minimal). Optional: Python 3 + Pillow if you want auto palette sampling from images.
- From the repo root: `./scripts/install.sh`
  - Creates `~/.config/glitch/` with `glitch.config`, `color.config`, `shape.config`, and `variants/`.
  - Builds the binary and installs the man page.
  - If Python is missing, it will fall back to a baked palette; you can swap in a template below.
- Adds this repo to your PATH in `~/.bashrc` (run `source ~/.bashrc` after install). `./scripts/path.sh` is still available if you need to re-add it manually.

2) Add your own pictures (Kitty overlays / palette sampling)
- Drop square PNGs into `~/.config/glitch/variants/`. Name them after a noise mode (e.g., `sunset.png`, `sword.png`, `storm.png`). The name drives both the overlay and `GLITCH_NOISE`.
- To force a specific image/noise: `GLITCH_VARIANT=sunset ./glitch` (also sets `GLITCH_NOISE=sunset`).
- To keep your own directory separate, set `LOCAL_IMAGES_DIR=/path/to/your/pngs` inside `~/.config/glitch/glitch.config` (or export `GLITCH_VARIANT_DIR`), then rerun `./scripts/install.sh`.
- If `NET_IMAGES=0` or `LOCAL_IMAGES_DIR` is set, any `*.png` in that directory will be used (even if the filename doesnâ€™t match a noise mode); a random one is picked if none match.

3) Apply your own hex palette
- Edit `~/.config/glitch/color.config` directly (keys: BG1..BG4, FG_DIS, FG_KER, FG_UPT, FG_MEM, FG_PIPE), then rerun `./scripts/install.sh` to regenerate `colors.h`.
- Use a template from `config/`:
  - Nord: `cp config/color.config.nord ~/.config/glitch/color.config`
  - Dracula: `cp config/color.config.dracula ~/.config/glitch/color.config`
  - High contrast: `cp config/color.config.high-contrast ~/.config/glitch/color.config`
  - Gruvbox: `cp config/color.config.gruvbox ~/.config/glitch/color.config`
  - Grayscale: `cp config/color.config.grayscale ~/.config/glitch/color.config`
  - After copying, run `./scripts/install.sh` to rebuild with that palette.
- Alternately, bake in a palette without Python by setting `GLITCH_PALETTE=miami|sunset|neon|random` before `./scripts/install.sh`.

4) Turn off web downloads for PNGs
- Set `NET_IMAGES=0` in `~/.config/glitch/glitch.config` (or export `NET_IMAGES=0`) to disable all network fetching.
- For a text-only build, use `make minimal` (or run `./scripts/install.sh` after setting `NET_IMAGES=0` to keep configs in sync).

5) TLDR page (tldr/tealdeer)
- Install a client (`pip install tldr` or `cargo install tealdeer`).
- Run `./scripts/setup-tldr.sh` to copy/symlink the `glitch` page into both python-tldr and tealdeer caches (survives `tldr --update`).
- Then `tldr glitch` / `tealdeer glitch` should resolve.

6) Extra stats + images
- Available stat keys (set `STATS=` in `~/.config/glitch/glitch.config`): distro,kernel,uptime,mem,host,user,shell,cpu,ip,ip4,ip6,pub4,pub6,dns,ntp,fs,disk,ports,entropy (max 14).
- Public IPs: use `pub4`/`pub6`; private IPs: `ip`/`ip4`/`ip6`; fs: `fs`; DNS: `dns`; NTP: `ntp`.
- To force a specific online PNG (e.g., copied from lynx): set `IMAGE_URL=https://...` in `~/.config/glitch/glitch.config`, export `GLITCH_IMAGE_URL`, or run `./glitch --image-url URL`.
- Fast mode: skip network stats/fetches with `FAST=1` in config, `GLITCH_FAST=1`, or `./glitch --fast`.
- Skip network stats only (keep other fetches): set `NET_STATS=0` in config, `GLITCH_NET_STATS=0`, or use `./glitch --no-net-stats`.

7) Run
- Default: `./glitch`
- Single frame: `./glitch --once`
- Lock a shape/noise: `GLITCH_NOISE=diamond ./glitch`
- Speed/duration: `GLITCH_SPEED=120 GLITCH_DURATION_MS=4000 ./glitch`
